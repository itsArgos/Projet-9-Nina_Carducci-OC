function mauGallery(e) {
  const t = { ...mauGallery.defaults, ...e },
    l = document.querySelectorAll(".gallery");
  let a = [];
  l.forEach(function (e) {
    !(function (e) {
      const t = e.children[0];
      if (!t?.classList.contains("row")) {
        const l = document.createElement("div");
        l.classList.add("gallery-items-row", "row"), e.insertBefore(l, t);
      }
    })(e),
      t.lightBox &&
        (function (e, t, l) {
          const a = document.createElement("dialog"),
            n = document.createElement("div");
          (a.id = t || "galleryLightbox"),
            (a.role = "dialog"),
            n.classList.add("modal-content"),
            (n.innerHTML =
              '<button class="btn-left" > &lt; </button> <img class="lightboxImage img-fluid" alt="Contenu de l\'image affichÃ©e dans la modale au clique"/> <button class="btn-right"> &gt; </button>'),
            a.appendChild(n),
            document.body.appendChild(a);
        })(0, t.lightboxId, t.navigation),
      (function (e) {
        const t = document.querySelectorAll(".gallery-item"),
          l = document.querySelector(".gallery");
        t.forEach(function (e) {
          e.addEventListener("click", function () {
            "IMG" === e.tagName && i(e);
          });
        }),
          l.addEventListener("click", (t) => {
            const l = t.target;
            l.classList.contains("nav-link")
              ? (function (e) {
                  const t = document.querySelectorAll(".active.active-tag"),
                    l = document.querySelectorAll(".gallery-item");
                  if (e.classList.contains("active-tag")) return;
                  t.forEach(function (e) {
                    e.classList.remove("active", "active-tag");
                  }),
                    e.classList.add("active-tag", "active");
                  const a = e.getAttribute("data-images-toggle");
                  l.forEach(function (e) {
                    (e.closest(".item-column").style.display = "none"),
                      ("all" === a ||
                        e.getAttribute("data-gallery-tag") === a) &&
                        (e.closest(".item-column").style.display = "block");
                  });
                })(l)
              : l.classList.contains("mg-prev")
              ? prevImage(e.lightboxId)
              : l.classList.contains("mg-next") && nextImage(e.lightboxId);
          });
      })(t),
      e.querySelectorAll(".gallery-item").forEach(function (e) {
        var l;
        "IMG" === (l = e).tagName && l.classList.add("img-fluid"),
          (function (e) {
            e.parentNode.querySelector(".gallery-items-row").appendChild(e);
          })(e),
          (function (e, t) {
            if ("number" == typeof t) {
              const l = `item-column mb-4 col-${Math.ceil(12 / t)}`,
                a = document.createElement("div");
              (a.className = l),
                e.parentNode.insertBefore(a, e),
                a.appendChild(e);
            } else if ("object" == typeof t) {
              let l = "";
              t.xs && (l += " col-" + Math.ceil(12 / t.xs)),
                t.sm && (l += " col-sm-" + Math.ceil(12 / t.sm)),
                t.md && (l += " col-md-" + Math.ceil(12 / t.md)),
                t.lg && (l += " col-lg-" + Math.ceil(12 / t.lg)),
                t.xl && (l += " col-xl-" + Math.ceil(12 / t.xl));
              const a = document.createElement("div");
              (a.className = "item-column mb-4 " + l),
                e.parentNode.insertBefore(a, e),
                a.appendChild(e);
            } else
              console.error(
                "Columns should be defined as numbers or objects." +
                  typeof t +
                  "is not supported."
              );
          })(e, t.columns);
        let n = e.getAttribute("data-gallery-tag");
        t.showTags && void 0 !== n && -1 === a.indexOf(n) && a.push(n);
      }),
      t.showTags &&
        (function (e, t, l) {
          let a =
            '<li class="nav-item"><span class="nav-link active active-tag"  data-images-toggle="all">Tous</span></li>';
          l.forEach(function (e) {
            a += `<li class="nav-item active">\n            <span class="nav-link"  data-images-toggle="${e}">${e}</span></li>`;
          });
          const n = document.createElement("ul");
          n.classList.add("my-4", "tags-bar", "nav", "nav-pills"),
            (n.innerHTML = a),
            "bottom" === t
              ? e.appendChild(n)
              : "top" === t
              ? e.insertBefore(n, e.firstChild)
              : console.error("Unknown tags position: " + t);
        })(e, t.tagsPosition, a),
      (e.style.display = "block");
  }),
    (mauGallery.defaults = {
      columns: 3,
      lightBox: !0,
      lightboxId: null,
      showTags: !0,
      tagsPosition: "bottom",
      navigation: !0,
    });
  let n = null;
  const o = document.querySelector("dialog");
  function i(e) {
    e
      ? ((n = e),
        (o.querySelector(".lightboxImage").src = e.src),
        o.addEventListener("click", function (e) {
          e.target === o && o.close();
        }),
        o.showModal())
      : o.close();
  }
  function c(e) {
    o.close(), i(n.parentNode[`${e}Sibling`]?.querySelector("img"));
  }
  const s = o.querySelector("button:first-child"),
    r = o.querySelector("button:last-child");
  s.addEventListener("click", () => c("previous")),
    r.addEventListener("click", () => c("next"));
}
export default mauGallery;
